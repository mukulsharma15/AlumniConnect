<!-- alumni/templates/alumni_form.html -->

{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white text-center">
                    <h2>Alumni Form</h2>
                </div>
                <div class="card-body p-4">
                    <form method="post" action="{% url 'alumni_form' %}">
                        {% csrf_token %}
                        <!-- Alumni Info -->
                        <h4>Alumni Info</h4>
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" class="form-control" id="firstName" name="first_name" placeholder="Enter First Name" required>
                        </div>
                        <div class="form-group">
                            <label for="middleName">Middle Name</label>
                            <input type="text" class="form-control" id="middleName" name="middle_name" placeholder="Enter Middle Name">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" class="form-control" id="lastName" name="last_name" placeholder="Enter Last Name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter Email Address" required>
                        </div>
                        <div class="form-group">
                            <label for="graduationYear">Graduation Year</label>
                            <input type="number" class="form-control" id="graduationYear" name="graduation_year" placeholder="Enter Graduation Year (e.g., 2020)">
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth</label>
                            <input type="date" class="form-control" id="dob" name="dob">
                        </div>
                        <div class="form-group">
                            <label for="currentCity">Current City</label>
                            <input type="text" class="form-control" id="currentCity" name="current_city" placeholder="Enter Current City">
                        </div>

                        <!-- Alumni Phone -->
                        <h4>Alumni Phone</h4>
                        <div id="phone-section">
                            <div class="form-group">
                                <label for="countryCode">Country Code</label>
                                <select class="form-control" id="countryCode" name="country_code[]" required>
                                    <option value="+1">+1</option>
                                    <option value="+91">+91</option>
                                    <!-- Add more country codes as needed -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="mobileNumber">Mobile Number</label>
                                <input type="text" class="form-control" id="mobileNumber" name="mobile_number[]" placeholder="Enter 10-digit Mobile Number" required>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary mb-3" onclick="addPhoneNumber()">Add Phone Number</button>

                        <!-- Academic History -->
                        <h4>Academic History</h4>
                        <div id="education-section">
                            <div class="form-group">
                                <label for="degreeName">Degree Name</label>
                                <select class="form-control" id="degreeName" name="degree_name[]" required>
                                    <option value="Bachelor's">Bachelor's</option>
                                    <option value="Master's">Master's</option>
                                    <option value="PhD">PhD</option>
                                    <!-- Add more degrees as needed -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cgpa">CGPA</label>
                                <input type="number" step="0.01" class="form-control" id="cgpa" name="cgpa[]" placeholder="Enter CGPA (up to 3.2 scale)">
                            </div>
                            <div class="form-group">
                                <label for="startYear">Start Year</label>
                                <input type="number" class="form-control" id="startYear" name="start_year[]" placeholder="Enter Start Year (e.g., 2018)" required>
                            </div>
                            <div class="form-group">
                                <label for="endYear">End Year</label>
                                <input type="number" class="form-control" id="endYear" name="end_year[]" placeholder="Enter End Year (e.g., 2022)">
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary mb-3" onclick="addEducation()">Add Education</button>

                        <!-- Achievements -->
                        <h4>Achievements</h4>
                        <div id="achievement-section">
                            <div class="form-group">
                                <label for="awardTitle">Award Title</label>
                                <input type="text" class="form-control" id="awardTitle" name="award_title[]" placeholder="Enter Award Title" required>
                            </div>
                            <div class="form-group">
                                <label for="description">Description</label>
                                <textarea class="form-control" id="description" name="description[]" placeholder="Describe the Achievement"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="dateAwarded">Date Awarded</label>
                                <input type="date" class="form-control" id="dateAwarded" name="date_awarded[]">
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary mb-3" onclick="addAchievement()">Add Achievement</button>

                        <!-- Professional History -->
                        <h4>Professional History</h4>
                        <div id="job-section">
                            <div class="form-group">
                                <label for="companyName">Company Name</label>
                                <input type="text" class="form-control" id="companyName" name="company_name[]" placeholder="Enter Company Name" required>
                            </div>
                            <div class="form-group">
                                <label for="jobTitle">Job Title</label>
                                <input type="text" class="form-control" id="jobTitle" name="job_title[]" placeholder="Enter Job Title" required>
                            </div>
                            <div class="form-group">
                                <label for="startDate">Start Date</label>
                                <input type="date" class="form-control" id="startDate" name="start_date[]" required>
                            </div>
                            <div class="form-group">
                                <label for="endDate">End Date</label>
                                <input type="date" class="form-control" id="endDate" name="end_date[]">
                            </div>
                            <div class="form-group">
                                <label for="skills">Skills</label>
                                <textarea class="form-control" id="skills" name="skills[]" placeholder="List relevant skills for this position"></textarea>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary mb-3" onclick="addJob()">Add Job Experience</button>

                        <!-- Social Media -->
                        <h4>Social Media</h4>
                        <div id="social-media-section">
                            <div class="form-group">
                                <label for="platform">Platform</label>
                                <select class="form-control" id="platform" name="platform[]" required>
                                    <option value="Instagram">Instagram</option>
                                    <option value="Facebook">Facebook</option>
                                    <option value="LinkedIn">LinkedIn</option>
                                    <!-- Add more platforms as needed -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="username">Username</label>
                                <input type="text" class="form-control" id="username" name="username[]" placeholder="Enter Username or Profile Link" required>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary mb-3" onclick="addSocialMedia()">Add Social Media Account</button>

                        <button type="submit" class="btn btn-primary btn-block">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Display JSON Data -->
    <div class="row justify-content-center mt-5">
        <div class="col-md-8">
            <h3>Submitted Data</h3>
            <pre id="json-data"></pre>
            <script id="alumni_data" type="application/json">{{ data|escapejs }}</script>
        </div>
    </div>
</div>

<script>
function addPhoneNumber() {
    const phoneSection = document.getElementById('phone-section');
    const newPhone = `
        <div class="form-group">
            <label for="countryCode">Country Code</label>
            <select class="form-control" name="country_code[]" required>
                <option value="+1">+1</option>
                <option value="+91">+91</option>
                <!-- Add more country codes as needed -->
            </select>
        </div>
        <div class="form-group">
            <label for="mobileNumber">Mobile Number</label>
            <input type="text" class="form-control" name="mobile_number[]" placeholder="Enter 10-digit Mobile Number" required>
        </div>`;
    phoneSection.insertAdjacentHTML('beforeend', newPhone);
}

function addEducation() {
    const educationSection = document.getElementById('education-section');
    const newEducation = `
        <div class="form-group">
            <label for="degreeName">Degree Name</label>
            <select class="form-control" name="degree_name[]" required>
                <option value="Bachelor's">Bachelor's</option>
                <option value="Master's">Master's</option>
                <option value="PhD">PhD</option>
                <!-- Add more degrees as needed -->
            </select>
        </div>
        <div class="form-group">
            <label for="cgpa">CGPA</label>
            <input type="number" step="0.01" class="form-control" name="cgpa[]" placeholder="Enter CGPA (up to 3.2 scale)">
        </div>
        <div class="form-group">
            <label for="startYear">Start Year</label>
            <input type="number" class="form-control" name="start_year[]" placeholder="Enter Start Year (e.g., 2018)" required>
        </div>
        <div class="form-group">
            <label for="endYear">End Year</label>
            <input type="number" class="form-control" name="end_year[]" placeholder="Enter End Year (e.g., 2022)">
        </div>`;
    educationSection.insertAdjacentHTML('beforeend', newEducation);
}

function addAchievement() {
    const achievementSection = document.getElementById('achievement-section');
    const newAchievement = `
        <div class="form-group">
            <label for="awardTitle">Award Title</label>
            <input type="text" class="form-control" name="award_title[]" placeholder="Enter Award Title" required>
        </div>
        <div class="form-group">
            <label for="description">Description</label>
            <textarea class="form-control" name="description[]" placeholder="Describe the Achievement"></textarea>
        </div>
        <div class="form-group">
            <label for="dateAwarded">Date Awarded</label>
            <input type="date" class="form-control" name="date_awarded[]">
        </div>`;
    achievementSection.insertAdjacentHTML('beforeend', newAchievement);
}

function addJob() {
    const jobSection = document.getElementById('job-section');
    const newJob = `
        <div class="form-group">
            <label for="companyName">Company Name</label>
            <input type="text" class="form-control" name="company_name[]" placeholder="Enter Company Name" required>
        </div>
        <div class="form-group">
            <label for="jobTitle">Job Title</label>
            <input type="text" class="form-control" name="job_title[]" placeholder="Enter Job Title" required>
        </div>
        <div class="form-group">
            <label for="startDate">Start Date</label>
            <input type="date" class="form-control" name="start_date[]" required>
        </div>
        <div class="form-group">
            <label for="endDate">End Date</label>
            <input type="date" class="form-control" name="end_date[]">
        </div>
        <div class="form-group">
            <label for="skills">Skills</label>
            <textarea class="form-control" name="skills[]" placeholder="List relevant skills for this position"></textarea>
        </div>`;
    jobSection.insertAdjacentHTML('beforeend', newJob);
}

function addSocialMedia() {
    const socialMediaSection = document.getElementById('social-media-section');
    const newSocialMedia = `
        <div class="form-group">
            <label for="platform">Platform</label>
            <select class="form-control" name="platform[]" required>
                <option value="Instagram">Instagram</option>
                <option value="Facebook">Facebook</option>
                <option value="LinkedIn">LinkedIn</option>
                <!-- Add more platforms as needed -->
            </select>
        </div>
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" name="username[]" placeholder="Enter Username or Profile Link" required>
        </div>`;
    socialMediaSection.insertAdjacentHTML('beforeend', newSocialMedia);
}

document.addEventListener('DOMContentLoaded', function() {
    const data = JSON.parse(document.getElementById('alumni_data').textContent);
    const jsonDataElement = document.getElementById('json-data');
    jsonDataElement.textContent = JSON.stringify(data, null, 2);

    data.forEach((entry, index) => {
        const updateLink = document.createElement('a');
        updateLink.href = `{% url 'update_alumni' 0 %}`.replace('0', index);
        updateLink.textContent = 'Update';
        updateLink.classList.add('btn', 'btn-warning', 'btn-sm', 'mr-2');

        const deleteLink = document.createElement('a');
        deleteLink.href = `{% url 'delete_alumni' 0 %}`.replace('0', index);
        deleteLink.textContent = 'Delete';
        deleteLink.classList.add('btn', 'btn-danger', 'btn-sm');

        const entryElement = document.createElement('div');
        entryElement.classList.add('mb-3');
        entryElement.appendChild(updateLink);
        entryElement.appendChild(deleteLink);

        jsonDataElement.appendChild(entryElement);
    });
});
</script>
{% endblock %}
